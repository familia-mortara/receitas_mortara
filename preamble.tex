\usepackage{booktabs}
\usepackage{longtable}
\usepackage{inputenc}
\usepackage[portuguese]{babel}

\newenvironment{cols}[1][]{}{}

\newenvironment{col}[1]{\begin{minipage}{#1}\ignorespaces}{%
\end{minipage}
\ifhmode\unskip\fi
\aftergroup\useignorespacesandallpars}

\def\useignorespacesandallpars#1\ignorespaces\fi{%
#1\fi\ignorespacesandallpars}

\makeatletter
\def\ignorespacesandallpars{%
  \@ifnextchar\par
    {\expandafter\ignorespacesandallpars\@gobble}%
    {}%
}
\makeatother

% \ifxetex
% \usepackage{letltxmacro}
% \setlength{\XeTeXLinkMargin}{1pt}
% \LetLtxMacro\SavedIncludeGraphics\includegraphics
% \def\includegraphics#1#{% #1 catches optional stuff (star/opt. arg.)
% \IncludeGraphicsAux{#1}%
% }%
% \newcommand*{\IncludeGraphicsAux}[2]{%
%   \XeTeXLinkBox{%
%     \SavedIncludeGraphics#1{#2}%
%   }%
% }%
% \fi
